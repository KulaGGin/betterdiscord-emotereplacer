!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r,a,i;a=[],void 0===(i="function"==typeof(r=function(){function e(e,t,n,r,a,i,o,u){var e=document.createElement("canvas");e.width=n,e.height=r;var c=e.getContext("2d");return c.mozImageSmoothingEnabled=!0,c.imageSmoothingQuality="high",c.webkitImageSmoothingEnabled=!0,c.msImageSmoothingEnabled=!0,c.imageSmoothingEnabled=!0,c.drawImage(t,a,i,o,u,0,0,n,r),e}function t(e){return e+.5<<0}function n(e,n,r,a,i,o,u){for(var c=new ImageData(n,r),s=new Int32Array(e.data.buffer),d=e.width,f=new Int32Array(c.data.buffer),m=c.width,h=n/o,l=r/u,g=t(1/h),v=t(1/l),E=g*v,p=0;p<c.height;p++)for(var b=0;b<m;b++){for(var w=a+t(b/h)+(i+t(p/l))*d,y=0,H=0,L=0,T=0,k=0;k<v;k++)for(var A=0;A<g;A++){var I=s[w+A+k*d];y+=I<<24>>>24,H+=I<<16>>>24,L+=I<<8>>>24,T+=I>>>24}y=t(y/E),H=t(H/E),L=t(L/E),T=t(T/E),f[b+p*m]=T<<24|L<<16|H<<8|y}return c}function r(e,t){e.width=t.width,e.height=t.height;var n=e.getContext("2d");return n.putImageData(t,0,0),e}function a(e,t,n,r,a,i){var o=a,u=i,c=a/i;0===e&&(e=t*c>>0),0===t&&(t=e/c>>0);var s=e/t;s>c?i=a/s>>0:a=i*s>>0;var n=n||(o-a)/2>>0,r=r||(u-i)/2>>0;return{destWidth:e,destHeight:t,sourceX:n,sourceY:r,sourceWidth:a,sourceHeight:i}}function i(e,t,n){if(t.returnCanvas)n(e);else if(t.returnBlob)e.toBlob(n,"image/"+(t.imageType||"jpeg"),t.quality||.85);else{var r=e.toDataURL("image/"+(t.imageType||"jpeg"),t.quality||.85);n(r)}}function o(e,t){e.complete?t():e.addEventListener("load",t)}function u(e){return e instanceof File?"File":e instanceof HTMLImageElement?"HTMLImageElement":e instanceof HTMLVideoElement?"HTMLVideoElement":"string"==typeof e?"URL":void 0}return function t(c,s,d,f){var m,h,l=function(e,t,n,r){var a=new Date,i={},o=a,u="01";return{mark:e?function(e){i[e=u+". "+(e||"...")]={"time (ms)":new Date-o},o=new Date,u=("0"+(1+(u>>0))).substr(-2)}:new Function,finish:e?function(){i[u+" TOTAL"]={"time (ms)":new Date-a},console.log("IMAGE SOURCE:",t),console.log("DOWNSCALE TO:",n+"x"+r),console.table(i)}:new Function}}(f&&f.debug||!1,c,s,d),g=(m=arguments).length<3?new TypeError("3 arguments required, but only "+m.length+" present."):u(m[0])?"number"!=typeof m[1]?new TypeError("Second argument should be a number"):"number"!=typeof m[2]?new TypeError("Third argument should be a number"):void 0:new TypeError("First argument should be HTMLImageElement, HTMLVideoElement, File of String");if(g instanceof TypeError)return Promise.reject(g);f=f||{};var v,E,p,b,w=new Promise(function(e,t){h=e});t.canvas=t.canvas||document.createElement("canvas"),t.cache=t.cache||(v=[],E=[],p=[],b=new Object,{createSetter:function(e){if(!this.get(e)){var t=v.push(e)-1;return E.push(b),p.push([]),function(e){E[t]=e,p[t]=p[t].reduce(function(t,n){n(e)},[])}}},get:function(e,t){var n=v.indexOf(e);~n&&(E[n]!==b?t(E[n]):p[n].push(t))},has:function(e){return!!~v.indexOf(e)}});var y=t.canvas,H=t.cache;if(H.has(c))return l.mark(),H.get(c,function(t){l.mark("PENDING CACHE");var o=t[0],u=t[1],c=a(s,d,f.sourceX,f.sourceY,u.width,u.height);if(c.sourceWidth/c.destWidth>=2&&c.sourceHeight/c.destHeight>=2){l.mark();var m=n(u,c.destWidth,c.destHeight,c.sourceX,c.sourceY,c.sourceWidth,c.sourceHeight);l.mark("DOWNSCALE"),y=r(y,m)}else y=e(y,o,c.destWidth,c.destHeight,c.sourceX,c.sourceY,c.sourceWidth,c.sourceHeight),l.mark("RESIZE WITH CANVAS");i(y,f,function(e){l.mark("PRODUCE RESULT"),h(e),l.finish()})}),w;if("HTMLVideoElement"!==u(c))var L=H.createSetter(c);var T,k,A=function(t,o,u){var c=a(s,d,f.sourceX,f.sourceY,o,u);if(c.sourceWidth/c.destWidth>=2&&c.sourceHeight/c.destHeight>=2){l.mark();var m=function(e,t,n,r){e.width=n,e.height=r;var a=e.getContext("2d");return a.drawImage(t,0,0),a.getImageData(0,0,n,r)}(y,t,o,u);l.mark("GET IMAGE DATA");var g=n(m,c.destWidth,c.destHeight,c.sourceX,c.sourceY,c.sourceWidth,c.sourceHeight);l.mark("DOWNSCALE"),y=r(y,g),L&&L([t,m])}else y=e(y,t,c.destWidth,c.destHeight,c.sourceX,c.sourceY,c.sourceWidth,c.sourceHeight),l.mark("RESIZE WITH CANVAS");i(y,f,function(e){l.mark("PRODUCE RESULT"),h(e),l.finish()})},I=window.URL||window.webkitURL;switch(u(c)){case"File":var S=document.createElement("img");l.mark(),S.src=I.createObjectURL(c),l.mark("READ FILE"),o(S,function(){l.mark("LOAD IMAGE"),A(S,S.naturalWidth,S.naturalHeight)});break;case"HTMLImageElement":l.mark(),o(c,function(){l.mark("LOAD IMAGE"),A(c,c.naturalWidth,c.naturalHeight)});break;case"HTMLVideoElement":k=function(){A(c,c.videoWidth,c.videoHeight)},(T=c).readyState>1?k():T.addEventListener("loadeddata",k);break;case"URL":l.mark(),setTimeout(function(){!function(e,t){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="arraybuffer",n.addEventListener("load",function(){t(this.response)}),n.send()}(c,function(e){l.mark("LOAD ARRAY BUFFER");var t=new Uint8Array(e),n=new Blob([t],{type:"image/jpeg"}),r=document.createElement("img");r.src=I.createObjectURL(n),l.mark(),o(r,function(){l.mark("LOAD IMAGE"),A(r,r.naturalWidth,r.naturalHeight)})})})}return w}})?r.apply(t,a):r)||(e.exports=i)},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);bdplugins.EmoteReplacer.plugin.downscale=a.a}]);